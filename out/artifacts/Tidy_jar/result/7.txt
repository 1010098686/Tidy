http://benyouhui.it168.com/thread-5101302-1-1.html	{"post":{"author":"泽泽酷儿","title":"【2014","content":"本帖最后由 泽泽酷儿 于 2014-11-16 17:34 编辑 【教程】Thinkpad E420修改白名单更换二合一无线网卡 作者：泽泽酷儿 ? ? 本教程以网上类似教程为基础，结合ThinkPad E420自身情况整理而成。 ? ? 注意，本教程所涉及到的工具存放在电脑上的路径中不得包含中文。否则，可能导致BIOS修改失败或者BIOS无法刷入。 ? ? 本教程所涉及的工具下载地址： ? ? 链接: http://pan.baidu.com/s/1sjoCQEp 密码: ni99 一、修改BIOS白名单篇 ? ? 1.首先，打开操作系统的的设备管理器，查看笔记本自带原装无线网卡的硬件ID； 01.png (48.38 KB, 下载次数: 151) 下载附件 2014-6-8 15:15 上传 02.png (98.27 KB, 下载次数: 149) 下载附件 2014-6-8 15:15 上传 ? ? 如图，我的E420的无线网卡的硬件ID值为“PCI\\VEN_10EC&DEV_8176&SUBSYS_819510EC&REV_03”。忽略最后一个REV参数，那么对每个字段分别使用little-endian小段字节序就是“EC107681EC109581”，将该字节序记录下来，作为后阶段搜索BIOS中白名单的依据。(计算方法：EC10为VEN值10EC的字节序，7681为DEV值8176的字节序，EC109581为SUBSYS值819510EC的字节序)。 ? ? 由于白名单的限制，ThinkPad E420在插上博通二合一无线网卡Broadcom BCM94352HMB时(802.11a/b/g/n/ac+蓝牙4.0，802.11n下最高支持到300Mbps，802.11ac下最高支持到867Mbps)，毫无意外的无法进系统提示如下： 20140608_113955_胜利路-1.jpg (1001.62 KB, 下载次数: 132) 下载附件 2014-6-8 15:36 上传 ? ? 由于二合一无线网卡，其实是将蓝牙模块和无线网卡模块集成在了一张卡上，开机过程中，联想强制自动比对白名单，会将蓝牙识别另一张无线网卡。不过，报错的提示其实是很重要的，因为它把蓝牙模块和无线网卡模块的硬件ID告诉我们了，后面修改BIOS白名单时，两个都用得上。不过，如果你买的是独立的无线网卡，自然就没有蓝牙模块的硬件ID。 ? ? 图中“13D3/3404”为蓝牙模块的硬件ID，根据笔记本电脑通用蓝牙模块的硬件ID格式，可还原为“USB\\VID_13D3&PID_3404”，其little-endian小段字节序就是“D3130434”； ? ? 图中“14E4/43B1/1A3B/2123”为无线网卡的硬件ID，还原为“PCI\\VEN_14E4&DEV_43B1&SUBSYS_21231A3B”，little-endian小段字节序就是“E414B1433B1A2321”。 ? ? 通常，你在购买无线网卡前最好沟通卖家提前拿到硬件ID，并按此教程修改BIOS的白名单并刷入主板，避免重复拆装机更换无线网卡。 ? ? 2.接下来，使用RwPortable提取当前主板的“AcpiTbls.rw”。这个文件是后面修改BIOS所必要的文件。操作过程如下图： 04.png (36.9 KB, 下载次数: 125) 下载附件 2014-6-8 15:15 上传 05.png (81.6 KB, 下载次数: 121) 下载附件 2014-6-8 15:15 上传 ?? ? ? 3.联想官网下载的官网下载的E420最新的BIOS及更新工具，当前最新版是1.26/1.14/1.06，下载得到一个可执行文件“BIOS[8huj17us].exe”，双击打开运行，先执行解压，解压路径如下： 06.png (23.71 KB, 下载次数: 115) 下载附件 2014-6-8 15:15 上传 07.png (25.44 KB, 下载次数: 101) 下载附件 2014-6-8 15:15 上传 ? ? 4.到刚才解压BIOS及工具的路径，按照下图所示，找到8H开头的BIOS文件“$0A8H000.FL1”，这个文件可以单独复制到别处做修改，比如我在写教程时就复制到路径G:\\BIOS\\： 08.png (9.22 KB, 下载次数: 100) 下载附件 2014-6-8 15:15 上传 ? ? 5.使用PhoenixTool打开这个BIOS文件，提示找到一个公钥，点“确定”： 09.png (18.14 KB, 下载次数: 97) 下载附件 2014-6-8 15:15 上传 ? ? 6.RW文件导入之前第2步使用RwPortable提取的“AcpiTbls.rw”文件，然后点“高级”，忽略“警告”提示： 10.png (15.81 KB, 下载次数: 88) 下载附件 2014-6-8 15:15 上传 ? ? 7.在高级选项界面，勾选“允许用户修改其他模块”和“非SLIC”，然后点完成： 11.png (41.29 KB, 下载次数: 89) 下载附件 2014-6-8 15:15 上传 ? ? 8.回到PhoenixTool主界面后，点击“执行”： 12.png (15.8 KB, 下载次数: 88) 下载附件 2014-6-8 15:15 上传 ? ? 9.当弹出“现在可以手动修改的任意模块位于DUNM目录”的信息对话框后，此时千万不要点击“确定”： 13.png (17.66 KB, 下载次数: 81) 下载附件 2014-6-8 15:15 上传 ? ? 10.由于前文我提到我把BIOS文件复制到了路径G:\\BIOS\\之后，使用PhoenixTool做修改，因而此时，在该路径下生成了“DUMP”文件夹： 14.png (30.09 KB, 下载次数: 83) 下载附件 2014-6-8 15:15 上传 ? ? 11.这时，我们需要在DUMP文件夹中找到包含笔记本自带无线网卡的白名单文件。于是，使用XSearch(作者：Jarett)来搜索： 15.png (57.72 KB, 下载次数: 85) 下载附件 2014-6-8 15:15 上传 ? ? 12.使用WinHex打开上一步搜到的ROM文件，并使用“查找十六进制数据”，查找原装无线网卡的小段字节： 16.png (18.76 KB, 下载次数: 83) 下载附件 2014-6-8 15:15 上传 17.png (73.85 KB, 下载次数: 84) 下载附件 2014-6-8 15:15 上传 18.png (33.92 KB, 下载次数: 83) 下载附件 2014-6-8 15:15 上传 19.png (11.89 KB, 下载次数: 83) 下载附件 2014-6-8 15:15 上传 ? ? 当我们查找到原装无线网卡的白名单后，经过仔细观察，可以得到五组8字节的白名单和五组4字节的白名单。我们可以从8字节名单任意挑选一组修改成新无线网卡的白名单，从4字节的白名单中挑选一组修改成二合一无线网卡的蓝牙模块的白名单。 20-1.png (17.28 KB, 下载次数: 83) 下载附件 2014-6-8 15:15 上传 21.png (3.3 KB, 下载次数: 83) 下载附件 2014-6-8 15:15 上传 22.png (25.44 KB, 下载次数: 84) 下载附件 2014-6-8 15:15 上传 23.png (8.9 KB, 下载次数: 84) 下载附件 2014-6-8 15:15 上传 ? ? 13.回到PhoenixTool主界面，此时点击“确定”，经历一小会的软件假死后，BIOS修改完成，并生成了新的BIOS。注意新BIOS的路径，记录下来： 24.png (17.74 KB, 下载次数: 85) 下载附件 2014-6-8 15:15 上传 25.png (17.55 KB, 下载次数: 79) 下载附件 2014-6-8 15:15 上传 ? ? 14.按照新的BIOS文件路径，将新BIOS文件复制到Phoenix UEFI WinFlash文件夹中： 26.png (56.03 KB, 下载次数: 82) 下载附件 2014-6-8 15:15 上传 ? ? 15.由于我的ThinkPad E420很久以前就已经将官方原版1.26/1.14/1.06的BIOS刷入主板了，而BIOS更新工具默认是禁止刷入同版本或者低版本的BIOS的，我当前只能使用DOS命令强刷。步骤如下，Windows Vista/7/8/8.1/8.1update以后的用户，请在“cmd.exe”点击鼠标右键，“以管理员身份运行”，并输入命令“winflash.exe /sd /sv 新的BIOS文件名.扩展名”，我的新BIOS名称为“$0A8H000_SLIC.FL1”，所以，我的命令为“winflash.exe /sd /sv $0A8H000_SLIC.FL1”，然后回车： ? ? 注：/sd /sv表示跳过日期及版本号验证，命令来源于本友会的msmmbl会员。 ? ?? ???我的CMD.exe是用Windows 8.1 x64 专业版 update 提取的，可能不兼容x86的32位系统。你可以从自己的C:\\Windows\\System32\\提取cmd.exe。只把这一个应用程序复制出来替换我打包的cmd.exe就行了。 27.png (9.12 KB, 下载次数: 83) 下载附件 2014-6-8 15:15 上传 ? ? 16.接下来，Phoenix UEFI WinFlash Utility开始刷入修改过白名单的新BIOS，之后笔电会自动重启。本篇到此结束。 28.png (43.38 KB, 下载次数: 81) 下载附件 2014-6-8 15:15 上传 二、拆机更换无线网卡篇 ? ? 1.? ?? ???接下来，开始拆机更换无线网卡过程，先上一下神器特写――博通二合一无线网卡Broadcom BCM94352HMB。 ? ? 注：802.11a/b/g/n/ac+蓝牙4.0，802.11n下最高支持到300Mbps，802.11ac下最高支持到867Mbps： 20140608_094108_胜利路-1.jpg (722.5 KB, 下载次数: 79) 下载附件 2014-6-8 16:00 上传 ? ? 2.工具特写，其实用得到的就是PH00号梅花起子、镊子。由于不用拆C面，所以撬板也用不上： 20140608_094205_胜利路-1.jpg (572.69 KB, 下载次数: 78) 下载附件 2014-6-8 16:01 上传 ? ? 3.向右滑动电池卡扣，再向上缓缓卸下电池；再卸下图中圆圈所示的4颗螺丝，从企口将后盖缓缓揭开： 20140608_094233_胜利路-1.jpg (631.22 KB, 下载次数: 78) 下载附件 2014-6-8 16:00 上传 ? ? 4.露出主要部件： 20140608_094720_胜利路.jpg (1.37 MB, 下载次数: 81) 下载附件 2014-6-8 15:16 上传 ? ? 5.用镊子将无线网卡的天线延长线从原装无线网卡插槽上轻轻摘下： 20140608_094931_胜利路-1.jpg (1.11 MB, 下载次数: 78) 下载附件 2014-6-8 15:36 上传 ? ? 6.松掉无线网卡螺丝后，无线网卡会轻轻翘起，然后将其从左侧的Mini PCI-E插槽中拔出来： 20140608_095010_胜利路-1.jpg (1.1 MB, 下载次数: 80) 下载附件 2014-6-8 15:36 上传 ? ? 7.将新的无线网卡，轻轻插入左侧的Mini PCI-E插槽： 20140608_095108_胜利路-1.jpg (1.19 MB, 下载次数: 80) 下载附件 2014-6-8 15:36 上传 ? ? 8.将翘起的无线网卡压平后，拧上螺丝，再用镊子将天线延长线推入右侧的导线槽后，将天线帽按扣在无线网卡天线插口上，最后，装上后盖，开机进系统： 20140608_095324_胜利路-1.jpg (1.03 MB, 下载次数: 81) 下载附件 2014-6-8 15:36 上传 ? ? 9.由于LZ买的博通93452不时丢包的情况，一说是跟TP-Link的路由兼容性有问题。所以退货了。换了Intel 7260ac： ? ? 注：Intel 7260ac：802.11a/b/g/n/ac+蓝牙4.0，802.11n下最高支持到300Mbps，802.11ac下最高支持到867Mbps。 29.png (76.59 KB, 下载次数: 70) 下载附件 2014-6-11 20:59 上传 ? ? 10.测试环境：Windows 8.1 专业版update x64 with Media Center。 ? ? 目前LZ在公司租房中，使用的路由是TP-Link??WR2041N，支持到802.11n 450Mbps，不支持802.11ac。但受制于Intel 7260ac的802.11n最高仅支持到300Mbps，所以目前也就只能上到这个值了。先上图，等周末回家用网件R6300v2了，再上几张5Ghz的867Mbps图： 30.png (48.59 KB, 下载次数: 71) 下载附件 2014-6-11 20:59 上传 ? ? 11.由于Intel 7260ac在连接WIFI后，使用蓝牙的情况下，WIFI速率不断跳水，果断退货后，还是换回了前文的博通BCM94352，周末我回家，配合使用家里的网件R6300v2路由(802.11n最高速率450Mbps，802.11ac最高速率1300Mbps)，测试截图如下： 31.png (60.73 KB, 下载次数: 52) 下载附件 2014-6-14 21:03 上传 32.png (59.87 KB, 下载次数: 53) 下载附件 2014-6-14 21:03 上传","publish_date":"2014-06-08 15:21"},"replys":[{"author":"蓝典xw","content":"支持原创精华文章","publish_date":"2014-06-08 15:50"},{"author":"泽泽酷儿","content":"蓝典xw 发表于 2014-6-8 15:50 支持原创精华文章 感谢版主，我已经排版完成！","publish_date":"2014-06-08 16:19"},{"author":"sanyuanyanjin","content":"向楼主学习 ，我要加油了","publish_date":"2014-06-08 16:22"},{"author":"玩thinkpad","content":"好东西啊，啊啊啊","publish_date":"2014-06-08 19:27"},{"author":"LOVE梦1314","content":"厉害啊。。。。顶","publish_date":"2014-06-10 18:50"},{"author":"只欠一句对不起","content":"如此复杂。看得眼花缭乱","publish_date":"2014-06-11 18:21"},{"author":"逸&fengxiao","content":"这样刷的啊，学习 装上新的后呢 开机进系统呢？","publish_date":"2014-06-11 19:38"},{"author":"364209769","content":"帮顶，看id应该是以前混塞班的泽泽酷啊","publish_date":"2014-06-11 20:42"},{"author":"泽泽酷儿","content":"逸&fengxiao 发表于 2014-6-11 19:38 这样刷的啊，学习 装上新的后呢 开机进系统呢？ 已补充开机进系统后的测试图~","publish_date":"2014-06-11 21:11"},{"author":"泽泽酷儿","content":"364209769 发表于 2014-6-11 20:42 帮顶，看id应该是以前混塞班的泽泽酷啊 幸会幸会~~","publish_date":"2014-06-11 21:11"},{"author":"boyving","content":"呵呵。。。酷儿！！！","publish_date":"2014-06-15 20:21"},{"author":"黑鱼科比","content":"楼主动手能力强，赞！","publish_date":"2014-06-16 15:17"},{"author":"千层糕有几层","content":"楼主好厉害，我看都看不懂，","publish_date":"2014-07-09 13:37"},{"author":"泽泽酷儿","content":"千层糕有几层 发表于 2014-7-9 13:37 楼主好厉害，我看都看不懂， 可以说，不用你看懂，几乎是照做就行了！","publish_date":"2014-07-10 21:39"},{"author":"xiajiebuhui","content":"本帖最后由 xiajiebuhui 于 2014-7-17 09:42 编辑 我的是 E520 520和420的bios的更新文件是一样的。 有个问题问下，你用的博通的网卡是哪里买的，某宝么？是不是戴尔拆机出来的AzureWave AW CE-123。海华版？ 我刚买了，还没到，准备到了看下id在刷bios。不知道你的是不是海华版。。如果是的话，麻烦提供下硬件ID。（Broadcom BCM94352HMB AC 876M BT4.0 DW1550） E420原机有蓝牙么？我的是自带有蓝牙模块，貌似蓝牙坏掉了，pe下和win8.1下都没有蓝牙，设备管理等等都没有蓝牙。 会不会有影响呢","publish_date":"2014-07-16 22:12"},{"author":"泽泽酷儿","content":"xiajiebuhui 发表于 2014-7-16 22:12 我的是 E520 520和420的bios的更新文件是一样的。 东西是在某宝买的不错。是不是海华版就不清楚了，产品 ID 由于我最近工具不在身边所以暂时没法拆了告诉你。 E420是部分型号有自带蓝牙。 如果你自带蓝牙的，可以拆机查查看。硬件是在C面键盘的下方，主板的上方。大概在触摸板左上方的位置。","publish_date":"2014-07-17 20:08"},{"author":"xiajiebuhui","content":"泽泽酷儿 发表于 2014-7-17 20:08 东西是在某宝买的不错。是不是海华版就不清楚了，产品 ID 由于我最近工具不在身边所以暂时没法拆了告诉你 ... 估计明天网卡也就到了。 到了自己看id吧，也就是多拆一次网卡而已。 我前几天清灰差了一次，蓝牙没动。不过既然是坏了也就暂时不动它了。 对了，我现在的无线网卡和你的id是一样的。 等到了在上个截图吧。既然你的E420没问题，我的520也应该能用","publish_date":"2014-07-17 23:09"},{"author":"xiajiebuhui","content":"QQ截图20140719230536.png (23.88 KB, 下载次数: 1) 下载附件 2014-7-19 23:05 上传 没有高端路由。 就普通的磊科nw737.考虑到别人也在用，不可能上到300Mbps。 原来的无线网卡和lz一样。只有72Mbps。 现在有144Mbps了。 以后再考虑ac路由的事情。 说起来装驱动真是一波三折。 半天没弄上，后来发现是因为原来删掉了system32下 驱动缓存文件夹的缘故，还有有备份，弄回去了就一切搞定。 说是蓝牙4.0，从哪里能看出来呢？","publish_date":"2014-07-19 23:09"},{"author":"泽泽酷儿","content":"本帖最后由 泽泽酷儿 于 2014-7-21 21:58 编辑 xiajiebuhui 发表于 2014-7-19 23:09 没有高端路由。 就普通的磊科nw737.考虑到别人也在用，不可能上到300Mbps。 原来的无线网卡和lz一样。只 ... 单独看蓝牙版本，我也没找到方法。 另外，博通这张卡若想达到满速，需要设置一下： 33.png (46.19 KB, 下载次数: 1) 下载附件 2014-7-21 21:57 上传","publish_date":"2014-07-21 21:50"}]}
